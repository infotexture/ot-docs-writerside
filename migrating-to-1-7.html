<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-02-13T09:29:37.46913"><title>Migrating to release 1.7 | DITA Open Toolkit 4.1</title><script type="application/json" id="virtual-toc-data">[{"id":"preprocessing","level":0,"title":"Preprocessing","anchor":"#preprocessing"},{"id":"html","level":0,"title":"HTML","anchor":"#html"},{"id":"html-and-extended-transformation-types","level":0,"title":"HTML and extended transformation types","anchor":"#html-and-extended-transformation-types"},{"id":"pdf","level":0,"title":"PDF","anchor":"#pdf"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Migrating to release 1.7 | DITA Open Toolkit 4.1"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="DITA Open Toolkit 4.1 Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="migrating-to-1-7.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Migrating to release 1.7 | DITA Open Toolkit 4.1"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "migrating-to-1-7.html#webpage",
    "url": "migrating-to-1-7.html",
    "name": "Migrating to release 1.7 | DITA Open Toolkit 4.1",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "/#website",
    "url": "/",
    "name": "DITA Open Toolkit 4.1 Help"
}</script><!-- End Schema.org --></head><body data-id="migrating-to-1.7" data-main-title="Migrating to release 1.7" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="custom-plugins.md|Creating plug-ins///migration.md|Migrating customizations"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>DITA Open Toolkit 4.1  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="migrating-to-1.7" id="migrating-to-1.7.md">Migrating to release 1.7</h1><p id="f0df404_2">In DITA-OT 1.7, a new preprocessing step implements flagging for HTML-based output formats. PDF processing was corrected with regard to <code class="code" id="f0df404_3">shortdesc</code> handling, and a new XSLT template mode was introduced for HTML TOC processing. Several stylesheets were moved to plug-in specific folders and deprecated properties and XSLT variables were removed.</p><p id="f0df404_4">A new job status file <code class="code" id="f0df404_5">.job.xml</code> has been introduced and replaces <code class="code" id="f0df404_6">dita.list</code> and <code class="code" id="f0df404_7">dita.xml.properties</code> as the normative source for job status. If you have custom processing which modifies the job properties, you should change your code to modify <code class="code" id="f0df404_8">.job.xml</code> instead.</p><p id="f0df404_9">Support for the following deprecated properties has been removed:</p><ul class="list _ul" id="f0df404_10"><li class="list__item" id="f0df404_11"><p><code class="code" id="f0df404_12">dita.input</code></p></li><li class="list__item" id="f0df404_13"><p><code class="code" id="f0df404_14">dita.input.dirname</code></p></li><li class="list__item" id="f0df404_15"><p><code class="code" id="f0df404_16">dita.extname</code></p></li></ul><p id="f0df404_17">Stylesheets for the following transformation types have moved to plug-in specific folders:</p><ul class="list _ul" id="f0df404_18"><li class="list__item" id="f0df404_19"><p>docbook</p></li><li class="list__item" id="f0df404_20"><p>eclipsecontent</p></li><li class="list__item" id="f0df404_21"><p>troff</p></li><li class="list__item" id="f0df404_22"><p>wordrtf</p></li></ul><p id="f0df404_23">If custom plug-ins have hard coded paths to these stylesheets, update references to use either <code class="code" id="f0df404_24">plugin</code> URIs in <code class="code" id="f0df404_25">xsl:import</code> instructions or use <code class="code" id="f0df404_26">dita.plugin.*</code> Ant properties.</p><p id="f0df404_27">The integration process has been changed to use strict mode by default. For old plug-ins which are not valid, lax processing mode can still be used.</p><p id="f0df404_28">Plug-ins that use the <code class="code" id="f0df404_29">MessageUtils</code> Java class must use <code class="code" id="f0df404_30">getInstance</code> method to access the <code class="code" id="f0df404_31">MessageUtils</code> instance, as <code class="code" id="f0df404_32">getMessage</code> methods have been changed to instance methods.</p><section class="chapter"><h2 id="preprocessing" data-toc="preprocessing">Preprocessing</h2><p id="f0df404_33">The preprocessing Ant dependency chain has been cleaned up. Tasks no longer depend on the previous task in the default chain, but rather the whole preprocess dependency chain is defined by the <code class="code" id="f0df404_34">preprocess</code> task.</p></section><section class="chapter"><h2 id="html" data-toc="html">HTML</h2><p id="f0df404_35">Core TOC generation has been moved to a separate XSLT stylesheet <code class="code" id="f0df404_36">xsl/map2htmtoc/map2htmlImpl.xsl</code> and the new templates use the mode <code class="code" id="f0df404_37">toc</code>. Plug-ins which override HTML TOC processing should change the map processing templates to <code class="code" id="f0df404_38">toc</code> mode.</p></section><section class="chapter"><h2 id="html-and-extended-transformation-types" data-toc="html-and-extended-transformation-types">HTML and extended transformation types</h2><p id="f0df404_39">Flagging logic has been pulled out of the core X/HTML code and moved to a preprocess step. This significantly simplifies and optimizes the X/HTML code, while making flagging logic available to any other transformation type. The new preprocess step implements all flagging logic; for each active flag, it adds a DITA-OT specific hint into the intermediate topics (implemented as a specialization of the DITA element). As part of this change, all flagging-related templates in the XHTML code (such as start-flagit and gen-style) are deprecated.</p><p id="f0df404_40">If you override the X/HTML transforms, you may need to update your overrides to use the new flagging logic. In most cases this just means deleting calls to the deprecated templates; in some cases, the calls can be replaced with 2 lines to process flags in new places. You should compare your override to the updated XHTML code and update as needed. See <a href="flagging-migration.html" id="f0df404_41" data-tooltip="This topic is primarily of interest to developers with XHTML transform overrides written prior to DITA-OT 1.7. Due to significant changes in the flagging process with the 1.7 release, some changes may be needed to make overrides work properly with DITAVAL-based flagging. The new&hellip;">XHTML migration for flagging updates in DITA-OT 1.7</a> for details.</p><p id="f0df404_42">Plug-ins that provide support for new transforms need to ensure that they properly support the DITA &lt;foreign&gt; element, which should be ignored by default; if so, this change will have no immediate impact. Support for flagging new transformation types may be more easily added based on this update, because there is no need to re-implement flagging logic, but this is not required. See <a href="preprocess-flagging.html" id="f0df404_43" data-tooltip="Beginning with DITA-OT 1.7, flagging support is implemented as a common flag-module preprocessing step. The module evaluates the DITAVAL against all flagging attributes, and adds DITA-OT&ndash;specific hints to the topic when flags are active. Any extended transformation type may use&hellip;">Flagging (flag-module)</a> for details on how to add flagging support.</p></section><section class="chapter"><h2 id="pdf" data-toc="pdf">PDF</h2><p id="f0df404_44">The following deprecated XSLT variables have been removed:</p><ul class="list _ul" id="f0df404_45"><li class="list__item" id="f0df404_46"><p><code class="code" id="f0df404_47">page-margin-left</code></p></li><li class="list__item" id="f0df404_48"><p><code class="code" id="f0df404_49">page-margin-right</code></p></li></ul><p id="f0df404_50">XSLT stylesheets have been split to separate specialization topic code and new <code class="code" id="f0df404_51">xsl:import</code> instructions have been added to <code class="code" id="f0df404_52">topic2fo.xsl</code>. Plug-ins which define their own shell stylesheet should be revised to import all the required stylesheet modules.</p><p id="f0df404_53">PDF processing used to replace topic <code class="code" id="f0df404_54">shortdesc</code> with map <code class="code" id="f0df404_55">shortdesc</code>, but this behavior was incorrect and was removed to comply with the DITA specification.</p><p id="f0df404_56">A new <code class="code" id="f0df404_57">#note-separator</code> variable string was added to facilitate customization.</p></section><div class="last-modified">Last modified: 13 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="migrating-to-1-8.html" class="navigation-links__prev">Migrating to release 1.8</a><a href="flagging-migration.html" class="navigation-links__next">XHTML migration for flagging updates in DITA-OT 1.7</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>