<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-02-13T09:29:37.424785"><title>Processing order | DITA Open Toolkit 4.1</title><script type="application/json" id="virtual-toc-data">[]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Processing order | DITA Open Toolkit 4.1"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="DITA Open Toolkit 4.1 Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="processing-order.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Processing order | DITA Open Toolkit 4.1"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "processing-order.html#webpage",
    "url": "processing-order.html",
    "name": "Processing order | DITA Open Toolkit 4.1",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "/#website",
    "url": "/",
    "name": "DITA Open Toolkit 4.1 Help"
}</script><!-- End Schema.org --></head><body data-id="processing-order" data-main-title="Processing order" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="reference_index.md|Reference///architecture.md|DITA Open Toolkit Architecture"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>DITA Open Toolkit 4.1  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="processing-order" id="processing-order.md">Processing order</h1><p id="846fc85c_2">The order of processing is often significant when evaluating DITA content. Although the DITA specification does not mandate a specific order for processing, DITA-OT has determined that performing filtering before conref resolution best meets user expectations. Switching the order of processing, while legal, may give different results.</p><p id="846fc85c_3">The DITA-OT project has found that filtering first provides several benefits. Consider the following sample that contains a <code class="code" id="846fc85c_4">&lt;note&gt;</code> element that both uses conref and contains a <code class="code" id="846fc85c_5">@product</code> attribute:</p><div class="code-block" data-lang="none">
&lt;note conref=&quot;documentA.dita#doc/note&quot; product=&quot;MyProd&quot;/&gt;
</div><p id="846fc85c_7">If the <code class="code" id="846fc85c_8">@conref</code> attribute is evaluated first, then documentA must be parsed in order to retrieve the note content. That content is then stored in the current document (or in a representation of that document in memory). However, if all content with product=&quot;MyProd&quot; is filtered out, then that work is all discarded later in the build.</p><p id="846fc85c_9">If the filtering is done first (as in DITA-OT), this element is discarded immediately, and documentA is never examined. This provides several important benefits:</p><ul class="list _ul" id="846fc85c_10"><li class="list__item" id="846fc85c_11"><p>Time is saved by discarding unused content as early as possible; all future steps can load the document without this extra content.</p></li><li class="list__item" id="846fc85c_12"><p>Additional time is saved case by not evaluating the <code class="code" id="846fc85c_13">@conref</code> attribute; in fact, documentA does not even need to be parsed.</p></li><li class="list__item" id="846fc85c_14"><p>Any user reproducing this build does not need documentA. If the content is sent to a translation team, that team can reproduce an error-free build without documentA; this means documentA can be kept back from translation, preventing accidental translation and increased costs.</p></li></ul><p id="846fc85c_15">If the order of these two steps is reversed, so that conref is evaluated first, it is possible that results will differ. For example, in the code sample above, the <code class="code" id="846fc85c_16">@product</code> attribute on the reference target will override the product setting on the referencing note. Assume that the referenced <code class="code" id="846fc85c_17">&lt;note&gt;</code> element in documentA is defined as follows:</p><div class="code-block" data-lang="none">
&lt;note id=&quot;note&quot; product=&quot;SomeOtherProduct&quot;&gt;This is an important note!&lt;/note&gt;
</div><p id="846fc85c_19">A process that filters out product=&quot;SomeOtherProduct&quot; will remove the target of the original conref before that conref is ever evaluated, which will result in a broken reference. Evaluating conref first would resolve the reference, and only later filter out the target of the conref. While some use cases can be found where this is the desired behavior, benefits such as those described above resulted in the current processing order used by DITA-OT.</p><div class="last-modified">Last modified: 13 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="processing-pipeline-modules.html" class="navigation-links__prev">Processing modules</a><a href="store-api.html" class="navigation-links__next">Store API &ndash; Processing in memory</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>