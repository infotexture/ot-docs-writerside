<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-02-13T09:29:37.433823"><title>Store API &ndash; Processing in memory | DITA Open Toolkit 4.1</title><script type="application/json" id="virtual-toc-data">[{"id":"stream-store-for-file-based-processing","level":0,"title":"Stream Store for file-based processing","anchor":"#stream-store-for-file-based-processing"},{"id":"cache-store-for-in-memory-processing","level":0,"title":"Cache Store for in-memory processing","anchor":"#cache-store-for-in-memory-processing"},{"id":"benefits","level":0,"title":"Benefits","anchor":"#benefits"},{"id":"caveats","level":0,"title":"Caveats","anchor":"#caveats"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Store API &ndash; Processing in memory | DITA Open Toolkit 4.1"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="DITA Open Toolkit 4.1 Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="store-api.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Store API &ndash; Processing in memory | DITA Open Toolkit 4.1"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "store-api.html#webpage",
    "url": "store-api.html",
    "name": "Store API &ndash; Processing in memory | DITA Open Toolkit 4.1",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "/#website",
    "url": "/",
    "name": "DITA Open Toolkit 4.1 Help"
}</script><!-- End Schema.org --></head><body data-id="store-api" data-main-title="Store API &ndash; Processing in memory" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="reference_index.md|Reference///architecture.md|DITA Open Toolkit Architecture"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>DITA Open Toolkit 4.1  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="store-api" id="store-api.md">Store API &ndash; Processing in memory</h1><p id="2bed0b86_2">DITA-OT originally assumed resources would be available on disk and available from file paths. Recent versions added URI input, so HTTPS resources could be used, but temporary and output resources were still file-based. DITA-OT 3.6 introduces a new Store API that can process temporary resources in memory instead of writing them to disk.</p><p id="2bed0b86_3">The Store API (<code class="code" id="2bed0b86_4">org.dita.dost.store.Store</code>) is a Java abstraction over temporary file operations. So for example instead of reading resources directly with <code class="code" id="2bed0b86_5">FileInputStream</code>, the Store API provides operations for this. This abstraction allows implementations of the Store API to choose how they handle resources, enables optimizations or non&ndash;file-based storage. Since DITA-OT processes a lot of XML data, the Store API offers operations for XML processing directly. For example, a read method to directly get a DOM <code class="code" id="2bed0b86_6">Document</code>, instead of opening a file stream manually, parsing it with an XML parser, and getting the <code class="code" id="2bed0b86_7">Document</code> instance from the parser.</p><p id="2bed0b86_8">The Store API is extendable using Java&rsquo;s <a href="https://docs.oracle.com/javase/9/docs/api/java/util/ServiceLoader.html" id="2bed0b86_9" data-external="true" rel="noopener noreferrer">Resource Loader</a> with the <code class="code" id="2bed0b86_10">org.dita.dost.store.StoreBuilder</code> service. This is a builder interface to get named <code class="code" id="2bed0b86_11">Store</code> instances (&ldquo;a Store&rdquo;).</p><section class="chapter"><h2 id="stream-store-for-file-based-processing" data-toc="stream-store-for-file-based-processing">Stream Store for file-based processing</h2><p id="2bed0b86_12">This Store could also be a File Store, since it uses disk and local files for temporary resources. This is the traditional DITA-OT implementation, where temporary XML files are stored under the <code class="code" id="2bed0b86_13">dita.temp.dir</code> path.</p><p id="2bed0b86_14">The Stream Store is activated by setting the <span class="control" id="2bed0b86_15">store-type</span> parameter to file.</p><p id="2bed0b86_16"><span class="control" id="2bed0b86_17">Note:</span> To ensure backwards compatibility, the file Store is the default setting in DITA-OT 3.6.</p></section><section class="chapter"><h2 id="cache-store-for-in-memory-processing" data-toc="cache-store-for-in-memory-processing">Cache Store for in-memory processing</h2><p id="2bed0b86_18">This Store is an in-memory Store, that keeps all temporary resources in memory. The name comes from the feature of the Store, that it caches the parsed XML after reading. That is, instead of storing XML as a byte array, it keeps it as a DOM <code class="code" id="2bed0b86_19">Document</code> or S9api <code class="code" id="2bed0b86_20">XdmNode</code>. When the same resource is re-read later, it doesn't have to parse it again, only return the parsed document. Resources that are not available in the temporary directory are handled with the Stream Store.</p><p id="2bed0b86_21">While the Store doesn't write anything to the temporary directory, it will still use URIs where the resources are under the temporary directory. The URIs are simply used for addressing, similarly to URNs. Future releases of DITA-OT may use some other method of addressing, such as a <code class="code" id="2bed0b86_22">tmp</code> URI scheme.</p><p id="2bed0b86_23"><span class="control" id="2bed0b86_24">Tip:</span> As of DITA-OT 3.6, the Cache Store can be activated by setting the <span class="control" id="2bed0b86_25">store-type</span> parameter to memory.</p></section><section class="chapter"><h2 id="benefits" data-toc="benefits">Benefits</h2><p id="2bed0b86_26">The initial implementation of the Cache Store is provided in DITA-OT 3.6 as a preview to allow integration partners to test this new feature.</p><p id="2bed0b86_27">In-memory processing provides performance advantages in I/O bound environments such as cloud computing platforms, where processing time depends primarily on how long it takes to read and write temporary files.</p><p id="2bed0b86_28">The Store API also makes the Saxon S9api easier to use. It offers an XML document model that is in most cases easier to work with than DOM. The abstraction Store makes it easier to work with XML, so various modules don&rsquo;t need to repeat the same type of XML processing code.</p></section><section class="chapter"><h2 id="caveats" data-toc="caveats">Caveats</h2><p id="2bed0b86_29">Not all custom plug-ins will work with the Cache Store, because they may assume files are used and expect direct file access for resource operations.</p><p id="2bed0b86_30"><span class="control" id="2bed0b86_31">Important:</span> To take advantage of the Store API, custom plug-ins must use DITA-OT XSLT modules in custom <code class="code" id="2bed0b86_32">&lt;pipeline&gt;</code> elements instead of Ant&rsquo;s built-in <code class="code" id="2bed0b86_33">&lt;xslt&gt;</code> tasks as recommended in <a href="plugin-coding-conventions.html" id="2bed0b86_34" data-tooltip="To ensure custom plug-ins work well with the core toolkit code and remain compatible with future releases, the DITA Open Toolkit project recommends that plug-ins use modern development practices and common coding patterns.">Plug-in coding conventions</a>.</p></section><div class="last-modified">Last modified: 13 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="processing-order.html" class="navigation-links__prev">Processing order</a><a href="preprocessing.html" class="navigation-links__next">Pre-processing modules</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>