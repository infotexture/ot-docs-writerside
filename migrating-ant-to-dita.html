<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-12-26T16:45:30.151943"><meta name="build-number" content="${buildNumber}">       <title>Migrating Ant builds to use the `dita` command | DITA Open Toolkit 4.1</title><script id="virtual-toc-data" type="application/json">[{"id":"example-ant-build","level":0,"title":"Example: Ant build","anchor":"#example-ant-build"},{"id":"example-properties-files-with-dita-command","level":0,"title":"Example: .properties files with dita command","anchor":"#example-properties-files-with-dita-command"},{"id":"example-call-the-dita-command-from-an-ant-build","level":0,"title":"Example: Call the dita command from an Ant build","anchor":"#example-call-the-dita-command-from-an-ant-build"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Migrating Ant builds to use the `dita` command | DITA Open Toolkit 4.1"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="DITA Open Toolkit 4.1 Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="migrating-ant-to-dita.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Migrating Ant builds to use the `dita` command | DITA Open Toolkit 4.1"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "migrating-ant-to-dita.html#webpage", "url": "migrating-ant-to-dita.html", "name": "Migrating Ant builds to use the `dita` command | DITA Open Toolkit 4.1", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/#website", "url": "/", "name": "DITA Open Toolkit 4.1 Help" }</script><!-- End Schema.org --></head>      <body data-id="migrating-ant-to-dita" data-main-title="Migrating Ant builds to use the `dita` command" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="building-output.md|Building output///build-using-dita-command.md|yes"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>DITA Open Toolkit 4.1  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="migrating-ant-to-dita"   id="migrating-ant-to-dita.md">Migrating Ant builds to use the `dita` command</h1>  <p id="1e3c717d_4">Although DITA Open Toolkit still supports Ant builds, switching to the <code class="code" id="1e3c717d_5">dita</code> command offers a simpler command interface, sets all required environment variables and allows you to run DITA-OT without setting up anything beforehand.</p><p id="1e3c717d_6">Building output with the <code class="code" id="1e3c717d_7">dita</code> command is often easier than using Ant. In particular, you can use <code class="code" id="1e3c717d_8">.properties</code> files to specify sets of DITA-OT parameters for each build.</p><p id="1e3c717d_9">You can include the <code class="code" id="1e3c717d_10">dita</code> command in shell scripts to perform multiple builds.</p><p id="1e3c717d_11"><span class="control" id="1e3c717d_12">Tip:</span> Add the absolute path for the <code class="code" id="1e3c717d_13">bin</code> folder of the DITA-OT installation directory to the <a href="https://en.wikipedia.org/wiki/PATH_(variable)" id="1e3c717d_14"   data-external="true" rel="noopener noreferrer" >PATH environment variable</a> to run the <code class="code" id="1e3c717d_15">dita</code> command from any location on the file system without typing the path.</p><ol class="list _decimal" id="1e3c717d_16" type="1"><li class="list__item" id="1e3c717d_17"><p id="1e3c717d_18">In your Ant build file, identify the properties set in each build target.</p><p id="1e3c717d_19"><span class="control" id="1e3c717d_20">Note:</span> Some build parameters might be specified as properties of the project as a whole. You can refer to a build log to see a list of all properties that were set for the build.</p></li><li class="list__item" id="1e3c717d_21"><p id="1e3c717d_22">Create a <code class="code" id="1e3c717d_23">.properties</code> file for each build and specify the needed build parameters, one per line, in the format <code class="code" id="1e3c717d_24">name = value</code>.</p></li><li class="list__item" id="1e3c717d_25"><p id="1e3c717d_26">Use the <code class="code" id="1e3c717d_27">dita</code> command to perform each build, referencing your <code class="code" id="1e3c717d_28">.properties</code> with the <span class="control" id="1e3c717d_29">--propertyfile</span>=<span class="emphasis" id="1e3c717d_30">file</span> option.</p></li></ol><section class="chapter"><h2 id="example-ant-build" data-toc="example-ant-build"   >Example: Ant build</h2><p id="1e3c717d_31">Prior to DITA-OT 2.0, an Ant build like this was typically used to define the properties for each target.</p><p id="1e3c717d_32">Sample build file: <code class="code" id="1e3c717d_33">*dita-ot-dir*/docsrc/samples``/ant_sample/build-chm-pdf.xml</code></p><div class="code-block" data-lang="none"         >
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project name=&quot;build-chm-pdf&quot; default=&quot;all&quot; basedir=&quot;.&quot;&gt;
  &lt;property name=&quot;dita.dir&quot; location=&quot;${basedir}/../../..&quot;/&gt;
  &lt;target name=&quot;all&quot; description=&quot;build CHM and PDF&quot; depends=&quot;chm,pdf&quot;/&gt;
  &lt;target name=&quot;chm&quot; description=&quot;build CHM&quot;&gt;
    &lt;ant antfile=&quot;${dita.dir}/build.xml&quot;&gt;
      &lt;property name=&quot;args.input&quot; location=&quot;../sequence.ditamap&quot;/&gt;
      &lt;property name=&quot;transtype&quot; value=&quot;htmlhelp&quot;/&gt;
      &lt;property name=&quot;output.dir&quot; location=&quot;../out/chm&quot;/&gt;
      &lt;property name=&quot;args.gen.task.lbl&quot; value=&quot;YES&quot;/&gt;
    &lt;/ant&gt;
  &lt;/target&gt;
  &lt;target name=&quot;pdf&quot; description=&quot;build PDF&quot;&gt;
    &lt;ant antfile=&quot;${dita.dir}/build.xml&quot;&gt;
      &lt;property name=&quot;args.input&quot; location=&quot;../taskbook.ditamap&quot;/&gt;
      &lt;property name=&quot;transtype&quot; value=&quot;pdf&quot;/&gt;
      &lt;property name=&quot;output.dir&quot; location=&quot;../out/pdf&quot;/&gt;
      &lt;property name=&quot;args.gen.task.lbl&quot; value=&quot;YES&quot;/&gt;
      &lt;property name=&quot;args.rellinks&quot; value=&quot;nofamily&quot;/&gt;
    &lt;/ant&gt;
  &lt;/target&gt;
&lt;/project&gt;
</div></section><section class="chapter"><h2 id="example-properties-files-with-dita-command" data-toc="example-properties-files-with-dita-command"   >Example: .properties files with dita command</h2><p id="1e3c717d_35">The following <code class="code" id="1e3c717d_36">.properties</code> files and <code class="code" id="1e3c717d_37">dita</code> commands are equivalent to the example Ant build.</p><p id="1e3c717d_38">Sample <code class="code" id="1e3c717d_39">.properties</code> file: <code class="code" id="1e3c717d_40">*dita-ot-dir*/docsrc/samples``/properties/chm.properties</code></p><div class="code-block" data-lang="none"         >
output.dir = out/chm
args.gen.task.lbl = YES
</div><p id="1e3c717d_42">Sample <code class="code" id="1e3c717d_43">.properties</code> file: <code class="code" id="1e3c717d_44">*dita-ot-dir*/docsrc/samples``/properties/pdf.properties</code></p><div class="code-block" data-lang="none"         >
output.dir = out/pdf
args.gen.task.lbl = YES
args.rellinks = nofamily
</div><p id="1e3c717d_46">Run from <code class="code" id="1e3c717d_47">*dita-ot-dir*/docsrc/samples</code>:</p><div class="code-block" data-lang="none"         >
`dita` **--input**=`sequence.ditamap` **--format**=htmlhelp \
     **--propertyfile**=`properties/chm.properties`
`dita` **--input**=`taskbook.ditamap` **--format**=pdf \
     **--propertyfile**=`properties/pdf.properties`
</div></section><section class="chapter"><h2 id="example-call-the-dita-command-from-an-ant-build" data-toc="example-call-the-dita-command-from-an-ant-build"   >Example: Call the dita command from an Ant build</h2><p id="1e3c717d_49">In some cases, you might still want to use an Ant build to implement some pre- or post-processing steps, but also want the convenience of using the <code class="code" id="1e3c717d_50">dita</code> command with <code class="code" id="1e3c717d_51">.properties</code> files to define the parameters for each build. This can be accomplished with Ant&rsquo;s <code class="code" id="1e3c717d_52">&lt;exec&gt;</code> task.</p><p id="1e3c717d_53">This example uses a <code class="code" id="1e3c717d_54">&lt;dita-cmd&gt;</code> Ant macro defined in the <code class="code" id="1e3c717d_55">*dita-ot-dir*/docsrc/samples``/ant_sample/dita-cmd.xml</code> file:</p><div class="code-block" data-lang="none"         >
&lt;macrodef name=&quot;dita-cmd&quot;&gt;
  &lt;attribute name=&quot;input&quot;/&gt;
  &lt;attribute name=&quot;format&quot;/&gt;
  &lt;attribute name=&quot;propertyfile&quot;/&gt;
  &lt;sequential&gt;
    &lt;!-- For Unix run the DITA executable--&gt;
    &lt;exec taskname=&quot;dita-cmd&quot; executable=&quot;${dita.dir}/bin/dita&quot; osfamily=&quot;unix&quot; failonerror=&quot;true&quot;&gt;
      &lt;arg value=&quot;--input&quot;/&gt;
      &lt;arg value=&quot;@{input}&quot;/&gt;
      &lt;arg value=&quot;--format&quot;/&gt;
      &lt;arg value=&quot;@{format}&quot;/&gt;
      &lt;arg value=&quot;--propertyfile&quot;/&gt;
      &lt;arg value=&quot;@{propertyfile}&quot;/&gt;
    &lt;/exec&gt;
    &lt;!-- For Windows run DITA from a DOS command --&gt;
    &lt;exec taskname=&quot;dita-cmd&quot; dir=&quot;${dita.dir}/bin&quot; executable=&quot;cmd&quot; osfamily=&quot;windows&quot; failonerror=&quot;true&quot;&gt;
      &lt;arg value=&quot;/C&quot;/&gt;
      &lt;arg value=&quot;dita --input @{input} --format @{format} --propertyfile=@{propertyfile}&quot;/&gt;
    &lt;/exec&gt;
  &lt;/sequential&gt;
&lt;/macrodef&gt;
</div><p id="1e3c717d_57">You can use this macro in your Ant build to call the <code class="code" id="1e3c717d_58">dita</code> command and pass the <span class="control" id="1e3c717d_59">input</span>, <span class="control" id="1e3c717d_60">format</span> and <span class="control" id="1e3c717d_61">propertyfile</span> parameters as follows:</p><div class="code-block" data-lang="none"         >
&lt;dita-cmd input=&quot;sample.ditamap&quot; format=&quot;pdf&quot; propertyfile=&quot;sample.properties&quot;/&gt;
</div><p id="1e3c717d_63">This approach allows you to use Ant builds to perform additional tasks at build time while allowing the <code class="code" id="1e3c717d_64">dita</code> command to set the classpath and ensure that all necessary JAR libraries are available.</p><p id="1e3c717d_65"><span class="control" id="1e3c717d_66">Note:</span> The attributes defined in the Ant macro are required and must be supplied each time the task is run. To set optional parameters in one build (but not another), use different <code class="code" id="1e3c717d_67">.properties</code> files for each build.</p><p id="1e3c717d_68">Sample build file: <code class="code" id="1e3c717d_69">*dita-ot-dir*/docsrc/samples``/ant_sample/build-chm-pdf-hybrid.xml</code></p><div class="code-block" data-lang="none"         >
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project name=&quot;build-chm-pdf-hybrid&quot; default=&quot;all&quot; basedir=&quot;.&quot;&gt;
  &lt;description&gt;An Ant build that calls the dita command&lt;/description&gt;
  &lt;include file=&quot;dita-cmd.xml&quot;/&gt;&lt;!-- defines the &lt;dita-cmd&gt; macro --&gt;
  &lt;target name=&quot;all&quot; depends=&quot;pre,main,post&quot;/&gt;
  &lt;target name=&quot;pre&quot;&gt;
    &lt;description&gt;Preprocessing steps&lt;/description&gt;
  &lt;/target&gt;
  &lt;target name=&quot;main&quot;&gt;
    &lt;description&gt;Build the CHM and PDF with the dita command&lt;/description&gt;
    &lt;property name=&quot;absolute.path.base&quot; location=&quot;../&quot;/&gt;
    &lt;dita-cmd
      input=&quot;${absolute.path.base}/sequence.ditamap&quot;
      format=&quot;htmlhelp&quot;
      propertyfile=&quot;${absolute.path.base}/properties/chm.properties&quot;
    /&gt;
    &lt;dita-cmd
      input=&quot;${absolute.path.base}/taskbook.ditamap&quot;
      format=&quot;pdf&quot;
      propertyfile=&quot;${absolute.path.base}/properties/pdf.properties&quot;
    /&gt;
  &lt;/target&gt;
  &lt;target name=&quot;post&quot;&gt;
    &lt;description&gt;Postprocessing steps&lt;/description&gt;
  &lt;/target&gt;
&lt;/project&gt;
</div></section><div class="last-modified"> Last modified: 26 December 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="using-dita-properties-file.html">Setting build parameters with `.properties` files</a>   <a class="navigation-links__next" href="using-project-files.html">Publishing with project files</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>