<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-12-26T16:45:30.185775"><meta name="build-number" content="${buildNumber}">       <title>Plug-in coding conventions | DITA Open Toolkit 4.1</title><script id="virtual-toc-data" type="application/json">[{"id":"best-practices","level":0,"title":"Best practices","anchor":"#best-practices"},{"id":"use-a-custom-namespace","level":0,"title":"Use a custom namespace","anchor":"#use-a-custom-namespace"},{"id":"upgrade-stylesheets-to-xslt-2-0","level":0,"title":"Upgrade stylesheets to XSLT 2.0","anchor":"#upgrade-stylesheets-to-xslt-2-0"},{"id":"use-custom-pipeline-elements","level":0,"title":"Use custom \u003cpipeline\u003e elements","anchor":"#use-custom-pipeline-elements"},{"id":"use-the-plug-in-directory-property","level":0,"title":"Use the plug-in directory property","anchor":"#use-the-plug-in-directory-property"},{"id":"use-the-plugin-uri-scheme","level":0,"title":"Use the plugin URI scheme","anchor":"#use-the-plugin-uri-scheme"},{"id":"use-ditafileset-to-select-files","level":0,"title":"Use \u003cditafileset\u003e to select files","anchor":"#use-ditafileset-to-select-files"},{"id":"match-elements-with-their-class-attribute","level":0,"title":"Match elements with their @class attribute","anchor":"#match-elements-with-their-class-attribute"},{"id":"validating-plug-ins","level":0,"title":"Validating plug-ins","anchor":"#validating-plug-ins"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Plug-in coding conventions | DITA Open Toolkit 4.1"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="DITA Open Toolkit 4.1 Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="plugin-coding-conventions.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Plug-in coding conventions | DITA Open Toolkit 4.1"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "plugin-coding-conventions.html#webpage", "url": "plugin-coding-conventions.html", "name": "Plug-in coding conventions | DITA Open Toolkit 4.1", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/#website", "url": "/", "name": "DITA Open Toolkit 4.1 Help" }</script><!-- End Schema.org --></head>      <body data-id="plugin-coding-conventions" data-main-title="Plug-in coding conventions" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="custom-plugins.md|Creating custom plug-ins"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>DITA Open Toolkit 4.1  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="plugin-coding-conventions"   id="plugin-coding-conventions.md">Plug-in coding conventions</h1>  <p id="725ed386_3">To ensure custom plug-ins work well with the core toolkit code and remain compatible with future releases, the DITA Open Toolkit project recommends that plug-ins use modern development practices and common coding patterns.</p><section class="chapter"><h2 id="best-practices" data-toc="best-practices"   >Best practices</h2><p id="725ed386_4">Adhering to certain development practices will properly isolate your code from that of DITA Open Toolkit. This will make it easier to you to upgrade to new versions of DITA-OT when they are released.</p><ul class="list _ul" id="725ed386_5"><li class="list__item" id="725ed386_6"><p id="725ed386_7">Use a properly-constructed DITA-OT plug-in.</p></li><li class="list__item" id="725ed386_8"><p id="725ed386_9">Use a version control system to store your code.</p></li><li class="list__item" id="725ed386_10"><p id="725ed386_11">Store the source code of your plug-ins outside of the DITA-OT installation directory, and add the repository location to the list of plug-in directories defined in the <span class="control" id="725ed386_12">plugindirs</span> entry of the <a href="configuration-properties-file.html" id="725ed386_13" data-tooltip="The configuration.properties file controls certain common properties, as well as some properties that control PDF processing."  ><code class="code" id="725ed386_14">configuration.properties</code> file</a>.</p></li><li class="list__item" id="725ed386_15"><p id="725ed386_16">Never modify any of the core DITA-OT code.</p><p id="725ed386_17"><span class="control" id="725ed386_18">Tip:</span> You may want to set the permissions on default plug-in directories such as <code class="code" id="725ed386_19">org.dita.pdf2</code> to &ldquo;read-only&rdquo; to ensure that you do not accidentally modify the files within as you develop your customized plug-in.</p></li><li class="list__item" id="725ed386_20"><p id="725ed386_21">Avoid copying entire DITA-OT files into your customization plug-in. When you only copy the attribute sets and templates that you need to override, there is less risk of impact from new features or fixes in the base code, making your code more stable and easier to upgrade between releases.</p></li><li class="list__item" id="725ed386_22"><p id="725ed386_23">If you only need to change a few attribute sets and templates, you may prefer to store your overrides in <code class="code" id="725ed386_24">custom.xsl</code> files, or a simple folder hierarchy within your custom plug-in.</p></li><li class="list__item" id="725ed386_25"><p id="725ed386_26">In cases that require substantial customizations, you may prefer to organize the files in a folder structure that mimics the hierarchy of the default plug-in you are customizing. This facilitates comparisons with the default settings in the base plug-in and makes it easier to migrate your changes to new toolkit versions. See <a href="pdf-plugin-structure.html" id="725ed386_27" data-tooltip="In cases that require substantial customizations, it is often useful to organize the files in a folder structure that mimics the hierarchy of the default PDF plug-in."  >PDF plug-in structure</a> for information on the files in the base PDF plug-in.</p></li><li class="list__item" id="725ed386_28"><p id="725ed386_29">Upgrade your customization plug-in to new versions of DITA-OT regularly. Do not wait through several major releases before upgrading.</p></li></ul></section><section class="chapter"><h2 id="use-a-custom-namespace" data-toc="use-a-custom-namespace"   >Use a custom namespace</h2><p id="725ed386_30">For XSLT customizations, use a custom namespace for any modified template modes, template names, attribute sets, functions, and variables. This helps to clarify which portions of the code are specific to your customizations, and serves to isolate your changes in the event that items with the same name are added to the base plug-ins in the future.</p><p id="725ed386_31">For example, instead of creating a template named <code class="code" id="725ed386_32">searchbar</code>, use something like <code class="code" id="725ed386_33">corp:searchbar</code> instead. This ensures that if future versions of DITA-OT add a <code class="code" id="725ed386_34">searchbar</code> template, your custom version will be unaffected.</p><p id="725ed386_35">Instead of:</p><div class="code-block" data-lang="none"         >
&lt;xsl:template name=&quot;searchbar&quot;/&gt;
</div><p id="725ed386_37">use:</p><div class="code-block" data-lang="none"         >
&lt;xsl:template name=&quot;corp:searchbar&quot;/&gt;
</div></section><section class="chapter"><h2 id="upgrade-stylesheets-to-xslt-2-0" data-toc="upgrade-stylesheets-to-xslt-2-0"   >Upgrade stylesheets to XSLT 2.0</h2><p id="725ed386_39">The Saxon project has announced plans to remove XSLT 1.0 support from the Saxon-HE library that ships with DITA-OT:</p><aside class="prompt" data-type="tip" data-title="" id="725ed386_40"><p id="725ed386_41">&hellip;we&rsquo;re dropping XSLT 1.0 backwards compatibility mode from Saxon-HE, and hope to eliminate it entirely in due course.</p></aside><aside class="prompt" data-type="tip" data-title="" id="725ed386_42"><p id="725ed386_43"><a href="https://www.xml.com/news/release-saxon-98/" id="725ed386_44"   data-external="true" rel="noopener noreferrer" ><span class="control" id="725ed386_45">https://www.xml.com/news/release-saxon-98/</span></a></p></aside><p id="725ed386_46">DITA-OT 3.0 and 3.0.1 included Saxon-HE 9.8.0.5, which rejects XSLT stylesheets that specify <code class="code" id="725ed386_47">version=&quot;1.0&quot;</code>. Plug-ins with XSLT templates specifying version 1.0 will fail with the message &ldquo; <code class="code" id="725ed386_48">XSLT 1.0 compatibility mode is not available in this configuration</code>.&rdquo;</p><p id="725ed386_49">To resolve this issue, change any occurrences of <code class="code" id="725ed386_50">&lt;xsl:stylesheet version=&quot;1.0&quot;&gt;</code> in custom plug-in stylesheets to at least <code class="code" id="725ed386_51">&lt;xsl:stylesheet version=&quot;2.0&quot;&gt;</code>.</p><p id="725ed386_52"><span class="control" id="725ed386_53">Tip:</span> DITA-OT 3.0.2 includes Saxon-HE 9.8.0.7, which restores XSLT 1.0 backwards-compatibility mode, but the DITA Open Toolkit project recommends upgrading all stylesheets to XSLT 2.0 to ensure plug-ins remain compatible with future versions of DITA-OT and Saxon-HE.</p></section><section class="chapter"><h2 id="use-custom-pipeline-elements" data-toc="use-custom-pipeline-elements"   >Use custom &lt;pipeline&gt; elements</h2><p id="725ed386_54">In Ant scripts, use the XSLT module from DITA-OT instead of Ant&rsquo;s built-in <code class="code" id="725ed386_55">&lt;xslt&gt;</code> or <code class="code" id="725ed386_56">&lt;style&gt;</code> tasks.</p><p id="725ed386_57">The XSLT module allows access to DITA-OT features like using the job configuration to select files in the temporary folder based on file metadata and custom XSLT extension functions.</p><p id="725ed386_58"><span class="control" id="725ed386_59">Important:</span> Future versions of DITA-OT may switch to a new XML resolver or in-memory storage features that are not supported by Ant&rsquo;s XSLT task. To ensure compatibility with future releases, plug-ins should replace these constructs with custom <code class="code" id="725ed386_60">&lt;pipeline&gt;</code> elements.</p><p id="725ed386_61">Instead of:</p><div class="code-block" data-lang="none"         >
&lt;xslt style=&quot;${dita.plugin.example.dir}/custom.xsl&quot;
      basedir=&quot;${dita.temp.dir}&quot;
      destdir=&quot;${dita.output.dir}&quot;
      includesfile=&quot;${dita.temp.dir}/${fullditatopicfile}&quot;/&gt;
</div><p id="725ed386_63">use:</p><div class="code-block" data-lang="none"         >
&lt;pipeline&gt;
  &lt;xslt style=&quot;${dita.plugin.example.dir}/custom.xsl&quot;
        destdir=&quot;${dita.output.dir}&quot;&gt;
    &lt;ditafileset format=&quot;dita&quot; /&gt;
  &lt;/xslt&gt;
&lt;/pipeline&gt;
</div></section><section class="chapter"><h2 id="use-the-plug-in-directory-property" data-toc="use-the-plug-in-directory-property"   >Use the plug-in directory property</h2><p id="725ed386_65">In Ant scripts, always refer to files in other plug-ins using the <code class="code" id="725ed386_66">dita.plugin.*plugin-id*.dir</code> property.</p><p id="725ed386_67">Instead of:</p><div class="code-block" data-lang="none"         >
&lt;property name=&quot;base&quot; location=&quot;../example/custom.xsl&quot;/&gt;
</div><p id="725ed386_69">use:</p><div class="code-block" data-lang="none"         >
&lt;property name=&quot;base&quot; location=&quot;${dita.plugin.example.dir}/custom.xsl&quot;/&gt;
</div><p id="725ed386_71">This fixes cases where plug-ins are installed to custom plug-in directories or the plug-in folder name doesn&rsquo;t match the plug-in ID.</p><p id="725ed386_72"><span class="control" id="725ed386_73">Tip:</span> For details, see <a href="referencing-other-plugins.html" id="725ed386_74" data-tooltip="Starting with DITA-OT 1.5.4, you can use the plugin:*plugin-id* URI extension and the ${dita.plugin.*plugin-id*.dir} Ant variable to reference the base path of another installed DITA-OT plug-in."  >Referencing files from other plug-ins</a>.</p></section><section class="chapter"><h2 id="use-the-plugin-uri-scheme" data-toc="use-the-plugin-uri-scheme"   >Use the plugin URI scheme</h2><p id="725ed386_75">In XSLT, use the <code class="code" id="725ed386_76">plugin</code> URI scheme in <code class="code" id="725ed386_77">&lt;xsl:import&gt;</code> and <code class="code" id="725ed386_78">&lt;xsl:include&gt;</code> to reference files in other plug-ins.</p><p id="725ed386_79">Instead of:</p><div class="code-block" data-lang="none"         >
&lt;xsl:import href=&quot;../../org.dita.base/xsl/common/output-message.xsl&quot;/&gt;
</div><p id="725ed386_81">use:</p><div class="code-block" data-lang="none"         >
&lt;xsl:import href=&quot;plugin:org.dita.base:xsl/common/output-message.xsl&quot;/&gt;
</div><p id="725ed386_83">As with the plug-in directory property in Ant, this allows plug-ins to resolve to the correct directory even when a plug-in moves to a new location. The plug-in is referenced using the syntax <code class="code" id="725ed386_84">plugin:*plugin-id*:*path/within/plugin/file.xsl*</code>.</p><p id="725ed386_85"><span class="control" id="725ed386_86">Tip:</span> For details, see <a href="referencing-other-plugins.html" id="725ed386_87" data-tooltip="Starting with DITA-OT 1.5.4, you can use the plugin:*plugin-id* URI extension and the ${dita.plugin.*plugin-id*.dir} Ant variable to reference the base path of another installed DITA-OT plug-in."  >Referencing files from other plug-ins</a>.</p></section><section class="chapter"><h2 id="use-ditafileset-to-select-files" data-toc="use-ditafileset-to-select-files"   >Use &lt;ditafileset&gt; to select files</h2><p id="725ed386_88">In Ant scripts, use <code class="code" id="725ed386_89">&lt;ditafileset&gt;</code> to select resources in the temporary directory.</p><p id="725ed386_90">For example, to select all images referenced by input DITA files, instead of:</p><div class="code-block" data-lang="none"         >
&lt;copy todir=&quot;${copy-image.todir}&quot;&gt;
  &lt;fileset dir=&quot;${user.input.dir}&quot;&gt;
    &lt;includes name=&quot;*.jpg&quot;/&gt;
    &lt;includes name=&quot;*.jpeg&quot;/&gt;
    &lt;includes name=&quot;*.png&quot;/&gt;
    &lt;includes name=&quot;*.gif&quot;/&gt;
    &lt;includes name=&quot;*.svg&quot;/&gt;
  &lt;/fileset&gt;
&lt;/copy&gt;
</div><p id="725ed386_92">use:</p><div class="code-block" data-lang="none"         >
&lt;copy todir=&quot;${copy-image.todir}&quot;&gt;
  &lt;ditafileset format=&quot;image&quot; /&gt;
&lt;/copy&gt;
</div><p id="725ed386_94">The <code class="code" id="725ed386_95">&lt;ditafileset&gt;</code> resource collection can be used to select different types of files.</p><div class="table-wrapper"><table class="wide" id="725ed386_96"><thead><tr class="ijRowHead" id="725ed386_97"><th id="725ed386_98"><p>Example</p></th><th id="725ed386_99"><p>Description</p></th></tr></thead><tbody><tr id="725ed386_100"><td id="725ed386_101"><p><code class="code" id="725ed386_102">&lt;ditafileset format=&quot;dita&quot;/&gt;</code></p></td><td id="725ed386_103"><p>Selects all DITA topics in the temporary directory.</p></td></tr><tr id="725ed386_104"><td id="725ed386_105"><p><code class="code" id="725ed386_106">&lt;ditafileset format=&quot;ditamap&quot;/&gt;</code></p></td><td id="725ed386_107"><p>Selects all DITA maps in the temporary directory.</p></td></tr><tr id="725ed386_108"><td id="725ed386_109"><p><code class="code" id="725ed386_110">&lt;ditafileset format=&quot;image&quot;/&gt;</code></p></td><td id="725ed386_111"><p>Selects images of all known types in the temporary directory.</p></td></tr></tbody></table></div></section><section class="chapter"><h2 id="match-elements-with-their-class-attribute" data-toc="match-elements-with-their-class-attribute"   >Match elements with their @class attribute</h2><p id="725ed386_112">Use <code class="code" id="725ed386_113">@class</code> attributes to match elements in XPATH expressions instead of element names.</p><p id="725ed386_114">For example, instead of:</p><div class="code-block" data-lang="none"         >
&lt;xsl:template match=&quot;p&quot;/&gt;
</div><p id="725ed386_116">use:</p><div class="code-block" data-lang="none"         >
&lt;xsl:template match=&quot;*[contains(@class,' topic/p ')]&quot;/&gt;
</div><p id="725ed386_118">Specialization-aware processing uses these classes to distinguish the general class of elements to which the current element belongs.</p><p id="725ed386_119"><span class="control" id="725ed386_120">Tip:</span> Matching classes instead of elements ensures that the expression also applies to any specialized elements as well as to their more general ancestors. This means you can define new markup without necessarily requiring new processing rules.</p></section><section class="chapter"><h2 id="validating-plug-ins" data-toc="validating-plug-ins"   >Validating plug-ins</h2><p id="725ed386_121">DITA-OT includes a RELAX&nbsp;NG schema file that can be used to validate the <code class="code" id="725ed386_122">plugin.xml</code> files that define the capabilities of each plug-in.</p><p id="725ed386_123">To ensure the syntax of your custom plug-in is correct, include an <code class="code" id="725ed386_124">xml-model</code> processing instruction at the beginning of the <code class="code" id="725ed386_125">plugin.xml</code> file, immediately after the XML prolog:</p><p id="725ed386_126"><code class="code" id="725ed386_127">xml-model href=&quot;https://www.dita-ot.org/rng/plugin.rnc&quot; type=&quot;application/relax-ng-compact-syntax&quot;</code></p><p id="725ed386_128">If your authoring environment does not apply this schema automatically, point your editor to <code class="code" id="725ed386_129">*dita-ot-dir*/resources/plugin.rnc</code> to associate the schema with your plug-in file.</p><p id="725ed386_130"><span class="control" id="725ed386_131">Related information</span></p><p id="725ed386_132"><a href="html-customization-plugins.html" id="725ed386_133" data-tooltip="In addition to the basic modifications that can be made with parameter settings and property files, you can create custom HTML plug-ins that bundle custom fonts, JavaScript, and stylesheets; modify the HTML markup, or override other aspects of HTML processing."  >Custom HTML plug-ins</a></p><p id="725ed386_134"><a href="pdf-customization-plugins.html" id="725ed386_135" data-tooltip="In most cases, PDF output should be customized by creating custom DITA-OT plug-ins that build on the default DITA to PDF transformation. PDF plug-ins can customize covers and page layouts, modify formatting, override the logic of the default PDF plug-in, and much more."  >Custom PDF plug-ins</a></p><p id="725ed386_136"><a href="plugin-dependencies.html" id="725ed386_137" data-tooltip="A DITA-OT plug-in can be dependent on other plug-ins. Prerequisite plug-ins are installed first, which ensures that DITA-OT handles XSLT overrides correctly."  >Plug-in dependencies</a></p><p id="725ed386_138"><a href="referencing-other-plugins.html" id="725ed386_139" data-tooltip="Starting with DITA-OT 1.5.4, you can use the plugin:*plugin-id* URI extension and the ${dita.plugin.*plugin-id*.dir} Ant variable to reference the base path of another installed DITA-OT plug-in."  >Referencing files from other plug-ins</a></p><p id="725ed386_140"><a href="https://www.oxygenxml.com/events/2018/dita-ot_day.html#apply_your_style_guide_rules_during_the_publication" id="725ed386_141"   data-external="true" rel="noopener noreferrer" >Validation meets publication - Apply your style guide rules during the publication</a></p><p id="725ed386_142"><a href="https://www.oxygenxml.com/events/2018/dita-ot_day.html#unit_testing_DITA-OT_plugin_extensions" id="725ed386_143"   data-external="true" rel="noopener noreferrer" >Unit Testing DITA-OT Plugin Extensions</a></p><p id="725ed386_144"><a href="https://www.oxygenxml.com/events/2018/dita-ot_day.html#meta_DITA_samples" id="725ed386_145"   data-external="true" rel="noopener noreferrer" >Meta DITA samples: testing around the edge cases</a></p><p id="725ed386_146"><a href="https://www.oxygenxml.com/events/2017/dita-ot_day.html#Managing_a_large_scale_build_environment" id="725ed386_147"   data-external="true" rel="noopener noreferrer" >Managing a large scale build environment with 50+ custom plugins</a></p><p id="725ed386_148"><a href="https://www.oxygenxml.com/events/2015/dita-ot_day.html#DITA-OT_Patterns_and_Anti-patterns" id="725ed386_149"   data-external="true" rel="noopener noreferrer" >DITA-OT Patterns and Anti-patterns</a></p><p id="725ed386_150"><a href="https://www.oxygenxml.com/events/2015/dita-ot_day.html#Multiple_OT_With_Git" id="725ed386_151"   data-external="true" rel="noopener noreferrer" >Multiple OT with Git</a></p></section><div class="last-modified"> Last modified: 26 December 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="plugin-configfile.html">Plug-in descriptor file</a>   <a class="navigation-links__next" href="plugin-dependencies.html">Plug-in dependencies</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>